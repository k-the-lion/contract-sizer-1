<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Contract Size Calculator (Toggle Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>

        <link rel="icon" href="/images/favicon.png" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
        <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Light Mode Defaults */
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #1f2937; /* text-gray-900 */
            transition: background-color 0.3s, color 0.3s;
        }

        /* Dark Mode Styles */
        .theme-dark {
            background-color: #111827; /* bg-gray-900 */
            color: #ffffff; /* text-white */
        }

        /* Styles for the Calculator Container */
        #calculator-box {
            background-color: #ffffff; /* bg-white */
            transition: background-color 0.3s, border-color 0.3s;
        }
        .theme-dark #calculator-box {
            background-color: #1f2937; /* bg-gray-800 */
        }

        /* Styles for Inputs/Selects */
        .app-input {
            background-color: #ffffff; /* bg-white */
            color: #1f2937; /* text-gray-900 */
            border-color: #d1d5db; /* border-gray-300 */
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            border-width: 1px; /* Ensure border is visible */
        }
        .theme-dark .app-input {
            background-color: #374151; /* bg-gray-700 */
            color: #ffffff; /* text-white */
            border-color: #4b5563; /* border-gray-600 */
        }
        /* Select arrow color fix for dark mode */
        .theme-dark select.app-input {
            /* This SVG changes the dropdown arrow color to white in dark mode */
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3e%3cpath fill-rule='evenodd' d='M5.23 7.21a.75.75 0 011.06.02L10 10.98l3.71-3.75a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z' clip-rule='evenodd'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }


        /* Toggle Switch Styling */
        .toggle-switch {
            display: inline-block;
            height: 24px;
            position: relative;
            width: 44px;
        }
        .toggle-switch input {
            display: none;
        }
        .slider {
            background-color: #ccc;
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: 0.4s;
            border-radius: 34px;
        }
        .slider:before {
            background-color: white;
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            transition: 0.4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4f46e5; /* indigo-600 */
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="theme-dark flex items-center justify-center min-h-screen p-4">
    <div id="calculator-box" class="w-full max-w-md rounded-xl shadow-2xl p-6 md:p-8">
        
        <div class="flex justify-between items-center mb-6">
            <header>
                <h1 class="text-2xl font-bold">Contract Size Calculator</h1>
                <p class="text-sm text-gray-500">Instantly find your correct position size.</p>
            </header>
            
                        <div class="flex items-center space-x-2">
                <svg id="sun-icon" class="h-6 w-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: none;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle" checked>
                    <span class="slider"></span>
                </label>
                <svg id="moon-icon" class="h-6 w-6 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </div>
        </div>

        <div class="space-y-4">
            <div>
                <label for="dollarRisk" class="block text-sm font-medium text-gray-300" id="label-dollarRisk">TP/SL Setting ($)</label>
                <input type="number" id="dollarRisk" value="150" class="app-input mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
            </div>
            <div>
                <label for="tradeRange" class="block text-sm font-medium text-gray-300" id="label-tradeRange">Trade Range (Points)</label>
                <input type="number" id="tradeRange" value="10" class="app-input mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
            </div>
            <div>
                <label for="instrument" class="block text-sm font-medium text-gray-300" id="label-instrument">Instrument</label>
                <select id="instrument" class="app-input mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3 appearance-none">
                    <option value="2.00" selected>MNQ</option>
                    <option value="20.00">NQ</option>
                </select>
            </div>
        </div>

        <div class="mt-8 pt-6 border-t border-gray-700">
            <div class="bg-indigo-600 text-white p-4 rounded-lg text-center">
                <p class="text-sm font-medium text-indigo-200">NUMBER OF CONTRACTS</p>
                <p id="numContracts" class="text-4xl font-bold">0</p>
            </div>
        </div>
    </div>

    <script>
        function calculate() {
            const dollarRisk = parseFloat(document.getElementById('dollarRisk').value) || 0;
            const tradeRange = parseFloat(document.getElementById('tradeRange').value) || 0;
            
            const pointValue = parseFloat(document.getElementById('instrument').value) || 0;

            const riskPerContract = tradeRange * pointValue;
            
            let numContracts = 0;
            if (riskPerContract > 0) {
                numContracts = Math.floor(dollarRisk / riskPerContract);
            }
            
            document.getElementById('numContracts').textContent = numContracts;
        }

        function toggleTheme() {
            const body = document.body;
            const isChecked = document.getElementById('darkModeToggle').checked;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            if (isChecked) {
                body.classList.add('theme-dark');
                // Hide Sun, Show Moon
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                body.classList.remove('theme-dark');
                // Show Sun, Hide Moon
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }

            // Update all label text colors
            const labels = document.querySelectorAll('label');
            labels.forEach(label => {
                if (isChecked) {
                    label.classList.remove('text-gray-700');
                    label.classList.add('text-gray-300');
                } else {
                    label.classList.remove('text-gray-300');
                    label.classList.add('text-gray-700');
                }
            });

            // Update border color on result divider
            const borderDivider = document.querySelector('.border-t');
            if (isChecked) {
                borderDivider.classList.remove('border-gray-200');
                borderDivider.classList.add('border-gray-700');
            } else {
                borderDivider.classList.remove('border-gray-700');
                borderDivider.classList.add('border-gray-200');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Setup calculation listeners
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => input.addEventListener('input', calculate));
            calculate(); // Initial calculation on page load

            // Setup theme toggle listener
            const toggle = document.getElementById('darkModeToggle');
            toggle.addEventListener('change', toggleTheme);

            // Run theme function on load to set initial state (we default to dark mode by setting 'checked' and 'theme-dark')
            toggleTheme(); 
        });
    </script>
</body>
</html>
